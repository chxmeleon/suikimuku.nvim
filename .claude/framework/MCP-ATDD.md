# Advanced MCP Orchestration

**Comprehensive MCP coordination** for complex ATDD workflows and advanced automation.

*Core MCP routing available in .claude/framework/MCP-CORE.md*

## Advanced Coordination Patterns

### BDD Analysis Workflow
```
bdd-analyst + Sequential: Stakeholder collaboration → structured BDD scenarios
bdd-analyst + Context7: BDD templates → standardized Given/When/Then patterns
```

### Design Integration Workflow  
```
ux-designer + Magic: BDD scenarios → UI components → design system compliance
system-architect + Context7: API patterns → BDD scenario implementation → technical architecture
system-architect + Sequential: Complex system analysis → multi-scenario coordination
```

### Implementation Workflow
```
frontend-engineer + Magic: feature.yaml → UI components → BDD scenario implementation
frontend-engineer + Context7: Framework patterns → component standards → testing integration
backend-engineer + Context7: API patterns → BDD scenario endpoints → data validation
backend-engineer + Sequential: Complex backend logic → multi-scenario data coordination
```

### Quality Validation Workflow
```
qa-validator + Playwright: BDD scenarios → automated testing → cross-browser validation
qa-validator + Sequential: Test strategy → comprehensive scenario coverage → quality reporting
```

### Multi-Agent Coordination
```
pair-coordinator + Sequential: Multi-agent orchestration → workflow optimization → quality gates
pair-coordinator + All Servers: Comprehensive coordination → resource optimization → ATDD workflow
```

### Evidence-Based Development Integration

#### Research-First Methodology
- **External Library Detection**: Automatic Context7 research blocking implementation
- **Documentation Requirements**: Official documentation must be validated before usage
- **Version Compatibility**: Automated compatibility checking across project dependencies
- **Security Assessment**: Integrated vulnerability scanning and security validation

#### Quality Gates with MCP
- **Pre-Implementation**: Context7 research required for all external dependencies
- **Architecture Decisions**: Sequential analysis for complex system design choices
- **Evidence Validation**: All technical decisions backed by MCP-researched documentation
- **Decision Documentation**: Research findings and analysis preserved with rationale

### Performance Optimization & Intelligence

#### Token Budget Management
- **Intelligent Escalation**: Native tools → Context7 → Sequential → Multi-MCP based on complexity
- **Cost-Aware Progression**: Start with lowest cost option, escalate based on value assessment
- **Abort Conditions**: High context usage triggers, MCP timeout/error handling, diminishing returns detection
- **Efficiency Patterns**: Batch operations, result caching, progressive loading strategies

#### Response Time Management
- **Context7 Optimization**: Cache frequent library lookups, batch documentation requests
- **Sequential Optimization**: Break complex analysis into manageable, parallelizable chunks
- **Parallel Processing**: Multiple MCP operations when dependencies allow coordination
- **Fallback Strategies**: Native analysis when MCP unavailable or inefficient

### Advanced Quality Control

#### Context7 Enhanced Validation
- **Documentation Quality**: Official sources preferred, version compatibility verified, examples validated
- **Source Reliability**: Primary documentation sources, community validation, recency assessment
- **Implementation Guidance**: Clear usage patterns, integration examples, best practices documentation
- **Security Considerations**: Vulnerability reports, security best practices, update requirements

#### Sequential Enhanced Validation
- **Analysis Completeness**: All major aspects covered, alternative approaches considered, risks identified
- **Reasoning Quality**: Logical progression, evidence-based conclusions, clear actionable recommendations
- **Actionability**: Specific next steps, implementation guidance, measurable success criteria
- **Documentation Clarity**: Decision rationale preserved, assumptions documented, evidence cited

## Error Recovery & Fallbacks

### Enhanced Recovery Strategies
- **Context7 unavailable** → WebSearch + domain expert patterns → manual implementation with validation
- **Sequential timeout** → native Claude analysis + simplified coordination → documented limitations  
- **Magic failure** → basic component generation + manual enhancement → design system guidance
- **Playwright connection lost** → manual testing guidance + generated test cases → validation checklists

### Quality Preservation with Intelligence
- All MCP integrations maintain BDD→TDD workflow integrity with intelligent adaptation
- Server failures trigger smart fallbacks that preserve customer evidence requirements
- Fallback strategies automatically maintain ATDD quality gates with alternative validation
- Manual alternatives provided with intelligence-enhanced guidance for all automated workflows

### Adaptive Orchestration
- **Context-Aware Routing**: Automatic server selection based on task type, complexity, and sub-agent needs
- **Performance Monitoring**: Real-time server performance tracking with automatic routing optimization
- **Load Balancing**: Intelligent distribution of requests across available MCP servers
- **Quality Assurance**: Continuous validation of MCP results against ATDD standards and customer value